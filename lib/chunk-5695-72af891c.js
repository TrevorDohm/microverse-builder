"use strict";(globalThis.webpackChunk_croquet_microverse=globalThis.webpackChunk_croquet_microverse||[]).push([[5695],{5695:(i,t,a)=>{a.r(t),a.d(t,{default:()=>e});const e={modules:[{name:"Garage",actorBehaviors:[class GarageActor{setup(){this.pointA=[7.799494248347024,-.3110201562611392,10.508325734249267],this.pointB=[7.799494248347024,4.188979843738861,10.508325734249267],this.subscribe(this.id,"updatePositionBy","updatePositionBy"),void 0===this._cardData.ratio&&(this._cardData.ratio=0),this.updatePositionBy(0),void 0===this.nextDirection&&(this.nextDirection="up"),void 0===this.moving&&(this.moving=!1),this.addEventListener("pointerDown","trigger"),this.addEventListener("pointerDoubleDown","nop")}trigger(){this.moving?this.moving=!1:(this.moving=!0,0===this._cardData.ratio?this.up():this.down())}up(){this.updatePositionBy(.0625),this.moving&&this.future(100).up()}down(){this.updatePositionBy(-.0625),this.moving&&this.future(100).down()}updatePositionBy(i){this._cardData.ratio+=i,this._cardData.ratio=Math.min(1,Math.max(0,this._cardData.ratio)),.75<=this._cardData.ratio?(this._cardData.ratio=.75,this.moving=!1,this.nextDirection="down"):this._cardData.ratio<=0&&(this._cardData.ratio=0,this.moving=!1,this.nextDirection="up"),this.set({translation:Worldcore.v3_lerp(this.pointA,this.pointB,this._cardData.ratio)}),this.say("updateDisplay")}}],pawnBehaviors:[class GaragePawn{setup(){this.listen("updateDisplay","updateDisplay")}initializeClipping(){let i=Worldcore.THREE;this.initialized||(this.obj&&(this.obj.onBeforeRender=null),this.obj=this.shape.children[0],this.clippingPlanes=[new i.Plane(new i.Vector3(0,1,0),0),new i.Plane(new i.Vector3(0,-1,0),0),new i.Plane(new i.Vector3(-1,0,0),0),new i.Plane(new i.Vector3(1,0,0),0)],this.initialized=!!this.obj)}updateDisplay(){this.initializeClipping();var i=4.5*(1-this.actor._cardData.ratio)-.5;let t=this.computeClippingPlanes([4.5,i,3.5,3.5]);this.obj&&this.obj.traverse(i=>{i.material&&(i.material.clippingPlanes=t)})}updatePosition(){this.initializeClipping(),this.publish(this.actor.id,"updatePositionBy",.1)}computeClippingPlanes(t){let a=[];if(Number.isNaN(this.shape.matrixWorld.elements[0]))return[];for(let i=0;i<4;i++)a[i]=new Worldcore.THREE.Plane,a[i].copy(this.clippingPlanes[i]),a[i].constant=t[i],a[i].applyMatrix4(this.shape.matrixWorld);return a}}]}]}}}]);