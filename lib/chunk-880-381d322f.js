"use strict";(globalThis.webpackChunk_croquet_microverse=globalThis.webpackChunk_croquet_microverse||[]).push([[880],{4880:(e,a,r)=>{r.r(a),r.d(a,{default:()=>t});const t={modules:[{name:"Cascade",actorBehaviors:[class CascadeActor{setup(){window.Worldcore=Worldcore;let e;var a,r=this._cardData.rapierType,t=this._cardData.rapierShape,i=this._cardData.rapierSensor,o=this._cardData.rapierForce;e="positionBased"===r?Worldcore.RAPIER.RigidBodyDesc.newKinematicPositionBased():"static"===r?Worldcore.RAPIER.RigidBodyDesc.newStatic():Worldcore.RAPIER.RigidBodyDesc.newDynamic(),this.call("Rapier$RapierActor","createRigidBody",e);let s;"ball"===t?(a=this._cardData.rapierSize||1,a/=2,s=Worldcore.RAPIER.ColliderDesc.ball(a)):"cuboid"===t&&(a=[(a=this._cardData.rapierSize||[1,1,1])[0]/2,a[1]/2,a[2]/2],s=Worldcore.RAPIER.ColliderDesc.cuboid(...a)),s.setRestitution(this._cardData.rapierRestitution||.4),s.setFriction(this._cardData.rapierFriction||.8),s.setDensity(this._cardData.rapierDensity||1.5),i&&(this.registerIntersectionEventHandler("intersection"),s.setSensor(!0),s.setActiveEvents(Worldcore.RAPIER.ActiveEvents.CONTACT_EVENTS|Worldcore.RAPIER.ActiveEvents.INTERSECTION_EVENTS)),this.collider=this.call("Rapier$RapierActor","createCollider",s),r||this.addEventListener("pointerTap","jolt"),o&&this.rigidBody.applyForce(o),this.listen("translating","translated")}jolt(){let e=this.rigidBody;e&&(e.applyForce({x:0,y:2,z:0},!0),e.applyTorque({x:.01*Math.random(),y:.2*Math.random(),z:.01*Math.random()},!0))}translated(){this._translation[1]<-10&&this.destroy()}registerIntersectionEventHandler(e){var a=this._behavior;let r=this.service("RapierPhysicsManager");this.intersectionEventHandlerBehavior=a.module.name+"$"+a.$behaviorName,this.intersectionEventHandlerMethod=e,r.registerIntersectionEventHandler(this._target)}registerContactEventHandler(e){var a=this._behavior;let r=this.service("RapierPhysicsManager");this.contactEventHandlerBehavior=a.module.name+"$"+a.$behaviorName,this.contactEventHandlerMethod=e,r.registerContactEventHandler(this._target)}intersection(e,a,r){console.log(e,a,r),r&&(e.id!==this.id&&e.destroy(),a.id!==this.id&&a.destroy())}}],pawnBehaviors:[class CascadePawn{setup(){var e,a,r;window.Worldcore=Worldcore,0===this.shape.children.length&&("ball"===(r=this.actor._cardData.rapierShape)?(e=this.actor._cardData.rapierSize||1,e=new Worldcore.THREE.SphereGeometry(e/2,32,16),a=new Worldcore.THREE.MeshStandardMaterial({color:this.actor._cardData.color||16711680}),this.obj=new Worldcore.THREE.Mesh(e,a),this.obj.castShadow=this.actor._cardData.shadow,this.obj.receiveShadow=this.actor._cardData.shadow):"cuboid"===r&&(e=this.actor._cardData.rapierSize||[1,1,1],a=new Worldcore.THREE.BoxGeometry(...e),r=new Worldcore.THREE.MeshStandardMaterial({color:this.actor._cardData.color||16711680}),this.obj=new Worldcore.THREE.Mesh(a,r),this.obj.castShadow=this.actor._cardData.shadow,this.obj.receiveShadow=this.actor._cardData.shadow),this.shape.add(this.obj)),this.removeEventListener("pointerDoubleDown","onPointerDoubleDown"),this.addEventListener("pointerDoubleDown","nop")}}]},{name:"Spray",actorBehaviors:[class SprayActor{setup(){void 0===this.running&&(this.running=!0,this.spray()),this.addEventListener("pointerDown","toggle")}randomColor(){var e=Math.random(),a=.8;let r,t,i,o,s,n,c,h;switch(n=a*(1-.8),c=a*(1-.8*(s=6*e-(o=Math.floor(6*e)))),h=a*(1-.8*(1-s)),o%6){case 0:r=a,t=h,i=n;break;case 1:r=c,t=a,i=n;break;case 2:r=n,t=a,i=h;break;case 3:r=n,t=c,i=a;break;case 4:r=h,t=n,i=a;break;case 5:r=a,t=n,i=c}return(Math.round(255*r)<<16)+(Math.round(255*t)<<8)+Math.round(255*i)}spray(){if(this.running){this.future(500).spray();var o=this.translation,o=[o[0],o[1]-.2,o[2]],s=Math.random()*Math.PI*2;let e=.2*Math.cos(s),a=.2*Math.sin(s),r,t,i;var n,s=Math.random();s<.01?this.createCard({name:"earth",type:"object",translation:o,layers:["pointer"],scale:[.1,.1,.1],behaviorModules:["Rapier","Earth","Cascade"],rapierSize:.8,rapierShape:"ball",rapierForce:{x:e,y:0,z:a},density:2,shadow:!0}):(n=this.randomColor(),s<.4?(r="cuboid",t=[.2,.2,.2]):(r="ball",t=.4,i=1.5,e*=5,a*=5),this.createCard({type:"object",layers:["pointer"],translation:o,behaviorModules:["Rapier","Cascade"],rapierSize:t,rapierForce:{x:e,y:0,z:a},rapierShape:r,rapierDensity:i,color:n,shadow:!0}))}}toggle(){this.running=!this.running,this.running&&this.spray()}}],pawnBehaviors:[class SprayPawn{setup(){var e,a;this.shape.children.forEach(e=>this.shape.remove(e)),this.shape.children=[],0===this.shape.children.length&&(e=new Worldcore.THREE.BoxGeometry(.2,.2,.2),a=new Worldcore.THREE.MeshStandardMaterial({color:this.actor._cardData.color||16711680}),this.obj=new Worldcore.THREE.Mesh(e,a),this.obj.castShadow=this.actor._cardData.shadow,this.obj.receiveShadow=this.actor._cardData.shadow,this.shape.add(this.obj))}}]}]}}}]);